<!DOCTYPE html>
<html lang="en">
<head>
  <title>Project Euler</title>

  <style>
    a {
      color: white;
      font-weight: bold;
      cursor: pointer;
    }

    iframe {
      border: 0;
      width: 100%;
      height: 100%;
    }
  </style>

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</head>

<body style="
    background-color: black;
    color: white;
    font-family: Arial;
    height: 90vh;
">

  <div class="container" style="height: 92vh">
    <nav class="navbar navbar-inverse">
      <div class="container-fluid">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" onclick="navigate('home')">Project Euler</a>
        </div>
        <div class="collapse navbar-collapse" id="myNavbar">
          <ul class="nav navbar-nav">
            <li class="dropdown">
              <a class="dropdown-toggle" data-toggle="dropdown">Problems <span class="caret"></span></a>
              <ul id="menu-items" class="dropdown-menu">

              </ul>
            </li>
          </ul>
          <ul class="nav navbar-nav navbar-right">
            <li><a onclick="navigate('about')">
              <span class="glyphicon glyphicon-info-sign"></span> About
            </a></li>
          </ul>
        </div>
      </div>
    </nav>

    <div id="content" class="row" style="overflow-y: auto; padding: 5px; height: 92vh">

    </div>
  </div>
</body>

<script>
  var myDropdown = [
    { call: 'navigate("3")', text: '3 - Largest Prime Factor' },
  ];

  var entries = '';
  myDropdown.forEach(entry => {
    entries += `<li><a onclick='${entry.call}'>${entry.text}</a></li>`;
  });
  document.getElementById('menu-items').innerHTML = entries;


  const pages = {
     'home': () => loadNormalPage('home.md'),
     'about': () => loadNormalPage('about.md'),
     '3': () => loadNotebookPage('problems/00003_largest_prime_factor/desc.md', 'problems/00003_largest_prime_factor/solution.html')
  }

  const url = new URL(window.location);
  const params = new URLSearchParams(url.search);

  var page = 'home';
  if(params.has('page'))
    page = params.get('page');

  pages[page]();


  function navigate(page) {
     window.location = location.protocol + '//' + location.host + location.pathname + '?page=' + page
  }

  async function loadNormalPage(mdFile) {
      await loadTemplate('normal');
      await loadMarkdown(mdFile, 'text');
  }

  async function loadNotebookPage(mdFile, notebookFile) {
      await loadTemplate('description_notebook');
      await loadMarkdown(mdFile, 'text');
      document.getElementById('notebook').src = notebookFile;
  }

  async function loadTemplate(file) {
      const response = await fetch('page_templates/' + file + '.html');
      const text = await response.text();
      document.getElementById('content').innerHTML = text;
  }

  async function loadMarkdown(file, id) {
      const response = await fetch(file);
      const text = await response.text();
      const html = marked.parse(text);
      document.getElementById(id).innerHTML = html;
  }
</script>
</html>
